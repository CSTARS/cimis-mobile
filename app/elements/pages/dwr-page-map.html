<link rel="import" href="../../components/google-map/google-map.html">
<link rel="import" href="../../components/google-map/google-map-search.html">

<polymer-element name="dwr-page-map">
    <template>
        <style>
            :host {
                width: 100%;
                height: 100%;
                display: block;
                position: absolute;
                top: 0px;
                left: 0px;
            }
            google-map {
                display: block;
                height: 100%;
            }
            .shadow {
                position: absolute;
                width: 100%;
                height:1px;
                top: -1px;
                left: 1px;
                box-shadow: 0 0 5px black;
            }
        </style>
        
        <google-map-search id="search" map="{{$.root.map}}" query="{{query}}" result="{{result}}"></google-map-search>
        <google-map id="root" latitude="{{result.latitude}}" longitude="{{result.longitude}}"></google-map>
        <div class="shadow"></div>
    </template>
    <script>
        Polymer('dwr-page-map', {
            query : '',
            result : {
                latitude : 37.77493,
                longitude : -122.41942
            },

            onShow : function() {
                if( !window.google ) return;
                google.maps.event.trigger(this.$.root.map, 'resize');
            },
            search : function(query) {
                this.query = query;
                this.$.search.search();
            }
        });
    </script>
</polymer-element>