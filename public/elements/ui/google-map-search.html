<dom-module id="google-map-search">

</dom-module>

<script>
  Polymer({

    is : 'google-map-search',

    ready : function() {
        this.map = null;
        this.query = null;
    }

    search: function() {
      if (this.query && this.map) {
        var places = new google.maps.places.PlacesService(this.map);
        places.textSearch({query: this.query}, this.gotResults.bind(this));
      }
    },
    
    gotResults: function(results, status) {
      this.results = [];

      for( var i = 0; i < results.length; i++ ) {
        console.log(results[i]);
        this.results.push({
          name : results[i].name,
          address : results[i].formatted_address,
          icon : results[i].icon,
          latitude: results[i].geometry.location.lat(),
          longitude: results[i].geometry.location.lng(),
          show: true
        });
      }

      this.fire('search-complete');
    }
  });
</script>
